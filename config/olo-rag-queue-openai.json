{
  "version": "1.0.0",
  "executionDefaults": {
    "engine": "TEMPORAL",
    "temporal": {
      "target": "localhost:7233",
      "namespace": "default",
      "taskQueuePrefix": "olo-"
    },
    "activity": {
      "payload": {
        "maxAccumulatedOutputKeys": 0,
        "maxResultOutputKeys": 0
      },
      "defaultTimeouts": {
        "scheduleToStartSeconds": 6000,
        "startToCloseSeconds": 3000,
        "scheduleToCloseSeconds": 30000
      },
      "retryPolicy": {
        "maximumAttempts": 3,
        "initialIntervalSeconds": 1,
        "backoffCoefficient": 2,
        "maximumIntervalSeconds": 60,
        "nonRetryableErrors": []
      }
    }
  },
  "pluginRestrictions": [],
  "featureRestrictions": [],
  "pipelines": {
    "olo-rag-queue-openai": {
      "name": "olo-rag-queue-openai",
      "workflowId": "olo-rag-queue-openai",
      "inputContract": {
        "strict": true,
        "parameters": [
          { "name": "userQuery", "type": "STRING", "required": true },
          { "name": "context", "type": "STRING", "required": false }
        ]
      },
      "variableRegistry": [
        { "name": "userQuery", "type": "STRING", "scope": "IN" },
        { "name": "context", "type": "STRING", "scope": "IN" },
        { "name": "retrievedContext", "type": "STRING", "scope": "INTERNAL" },
        { "name": "finalAnswer", "type": "STRING", "scope": "OUT" }
      ],
      "scope": {
        "plugins": [
          {
            "id": "OPENAI_EMBEDDINGS",
            "contractType": "EMBEDDING",
            "inputParameters": [
              { "name": "text", "type": "STRING", "required": true }
            ],
            "outputParameters": [
              { "name": "embedding", "type": "ARRAY" }
            ]
          },
          {
            "id": "OPENAI_CHAT",
            "contractType": "MODEL_EXECUTOR",
            "inputParameters": [
              { "name": "prompt", "type": "STRING", "required": true }
            ],
            "outputParameters": [
              { "name": "responseText", "type": "STRING" }
            ]
          }
        ],
        "features": []
      },
      "executionTree": {
        "id": "root",
        "type": "SEQUENCE",
        "children": [
          {
            "id": "chatNode",
            "type": "PLUGIN",
            "nodeType": "MODEL_EXECUTOR",
            "pluginRef": "OPENAI_CHAT",
            "inputMappings": [
              { "pluginParameter": "prompt", "variable": "userQuery" }
            ],
            "outputMappings": [
              { "pluginParameter": "responseText", "variable": "finalAnswer" }
            ]
          }
        ]
      },
      "outputContract": {
        "parameters": [
          { "name": "answer", "type": "STRING" }
        ]
      },
      "resultMapping": [
        { "variable": "finalAnswer", "outputParameter": "answer" }
      ]
    }
  }
}
